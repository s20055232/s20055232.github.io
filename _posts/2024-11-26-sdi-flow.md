---
title: "系統設計面試架構圖"
categories:
  - System Design
---

照著架構練習跟回答通常表現會比較好

![flow](/assets/2024-11-26-sdi-flow/flow.png){: data-fancybox="gallery"}

## Requirements (~5 minutes)

釐清問題是重要的第一步

### Functional Requirements

簡單來說就是「這個產品有什麼功能」，要找出功能性需求，就必須反覆跟面試官討論，最後討論的結果可能會像是：

- 使用者可以發布推文
- 使用者可以追蹤其他用戶
- 使用者可以看到自己追蹤的人的更新內容

要記住，這階段所找出的需求是你等等系統設計時要解決的，所以不能太發散、太廣，找出核心重點的功能來解決就好。

### Non-functional Requirements

非功能性需求應該要量化，像是：

- 延遲應該要 < 500 ms

而不是

- 延遲要低

這邊的需求不是能做到什麼，而是「有什麼期望」，像是：

- 系統應該高可用且可用性大於一致性
- 系統要能夠承受 1 億每日活躍使用者（DAUs）
- 低延遲，渲染速度低於 200 ms

非功能需求會比較難想，我們可以利用以下清單來發想：

- **CAP Threorem**：Consistency 與 Availability 權衡取捨，Fault Tolerance 在分布式系統中是默認具備的，這點要留意。
- **Environment Constraints**: 環境有任合條件跟限制嗎？邊緣端？手機？網路或記憶體有限制？
- **Scalability**：系統會需要在特定條件下擴張嗎？黑色星期五？對於系統來說讀跟寫哪種需求更大？
- **Latency**：能夠接受多大的延遲？對於有意義的需求，要特別考慮，像是 google 搜尋結果的輸出
- **Durability**：資料遺失對系統來說重不重要？社群媒體可能可以接受部分資料遺失，但對於銀行系統來說就不行
- **Security**：系統要多安全，這要考慮資料保護、存取控制、規範
- **Fault Tolerance**：系統的容錯性應該多好？冗余、容錯移轉、復原這些都是可以考慮的選項
- **Compliance**：是否有業界規範、法律需要遵守？

### Capacity Estimation

雖然很多教學可能會說要進行 back-of-the-envelope calculations（粗略計算），但通常這是不必要的，做計算的時機只有在那些計算對系統至關重要時才做，像是：

> 計算出在不同雲服務提供商下存儲 100TB/天 的成本，以及長期儲存這些視頻所需的總成本，並考慮是否需要設計更高效的壓縮和刪除策略來降低成本。

假設流量大部分來自北美和亞洲。你可以計算每個地區的高峰時段流量，以此來決定 CDN 節點的部署策略。

在面試環節時可以先跳過此環節，並說明當有需求時再回來計算。
